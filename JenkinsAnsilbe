// Variable for input
def inputIP

pipeline {
	agent {
		label 'master'
	}
	stages {
		stage('checkout'){
			steps {
			dir('Course') {
			deleteDir()
				script {
					git credentialsId: 'DevOpsINT', url: 'https://github.com/DevOpsINT/Course.git'
					sh 'ls'
				}
			}
			}
		}
		stage('Interactive_Input') {
			steps {
				script {
					// Get the input
					def userInput = input(
							id: 'Host', message: 'Please Enter Remote Machine IP:',
							parameters: [
								string(defaultValue: 'None',
								description: 'IP of Machine',
								name: 'IP'),
							])

					// Save to variable. Default to empty string if not found.
					inputIP = Host.IP?:''

					// Echo to console
					echo("Entered IP Is: ${inputIP}")
		    		} 
			}
		}
		stage('push new file') {
                        steps {
				dir('Course') {
                                	script {
                                        	withCredentials([usernamePassword(credentialsId: 'DevOpsINT', passwordVariable: 'Password', usernameVariable: 'Username')]){
							sh('pwd')
							sh('git status')
							sh('git config --global user.name "Gadi"')
							sh('git config --global user.email "gadigamburg@gmail.com"')
							sh('git checkout gadi')
							sh('git pull')
							sh('echo testing > ifconfig.file')
							sh('git add .')
							sh('git commit -m "Auto Push Pipeline gadi_file"')
                                                	sh('git status')
							sh('git push https://${Username}:${Password}@github.com/DevOpsINT/Course.git gadi')
						}
                                        }
                                        //Remark30
				}
			} 
		}

	}
}

