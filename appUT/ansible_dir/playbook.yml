---

-  gather_facts: no
   hosts : all
   remote_user: ubuntu
   become: yes

   pre_tasks:
   - raw: sudo apt -qy update&& sudo apt install -qy python3&& sudo apt install -qy python&& sudo apt install -qy python-pip&& sudo pip install docker-py
   - setup:

   tasks:
   - name: Install Docker
     apt:
       name: docker.io
       state: present

   - name: Stop Docker Service
     service:
       name: docker
       state: stopped

   - name: Start Docker Service
     service:
       name: docker
       state: started
       
   - name: Pull image from dockerhub
     shell: docker pull "{{ pulling_image_from_dockerhub }}"

   - name: Tag dockerhub image 
     shell: docker tag "{{ pulling_image_from_dockerhub }}" "{{ myfirstimage }}"
     
   - name: Run container from my image
     shell: docker run --name "{{ myfirstimage }}" "{{ myfirstimage }}" 
     
   - debug: 
      msg: "lulu"
    
   - name: Save Docker Log Into Register
     shell: docker logs "{{ myfirstimage }}"
     register: docker_log
  
   - debug:
       var: docker_log.stdout
     
     
   



